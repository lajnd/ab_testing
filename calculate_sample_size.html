<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample Size Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
    <script src="calculate_sample_size.js"></script> <!-- Add your script file link here -->
</head>
<body>
    <h1>Sample Size Calculator</h1>

    <form id="sample-size-form">
        <!-- Input fields for alpha, power level, conversion rate, and min effect in percentages -->
        <label for="alpha">Confidence level %:</label>
        <input type="number" id="confidence-level" name="alpha" step="1" min="0" max="100" value="95" required><br>

        <label for="power-level">Power Level %:</label>
        <input type="number" id="power-level" name="power-level" step="1" min="0" max="100" value="80" required><br>

        <label for="conversion-rate">Conversion Rate for control %:</label>
        <input type="number" id="conversion-rate" name="conversion-rate" step="1" min="0" max="100" value="10" required><br>

        <label for="min-effect">Minimum Detectable Effect (MDE) %:</label>
        <input type="number" id="min-effect" name="min-effect" step="1" min="0" max="100" value="20" required><br>

        <label for="num-variants">Number of Variants (not including control):</label>
        <input type="number" id="num-variants" name="num-variants" value="1"><br>

        <!-- get weekly traffic to calculate length for experiment -->
        <label for="weekly-traffic">Weekly Traffic:</label>
        <input type="number" id="weekly-traffic" name="weekly-traffic" value="1000">

        <!-- Radio buttons for isRelative -->
        <fieldset>
            <legend>Is the Minimum Effect Relative?</legend>
            <label>
                <input type="radio" name="is-relative" value="true" checked> Yes
            </label>
            <label>
                <input type="radio" name="is-relative" value="false"> No
            </label>
        </fieldset>

        <!-- Radio buttons for oneSided -->
        <fieldset>
            <legend>One-sided or Two-sided Test?</legend>
            <label>
                <input type="radio" name="one-sided" value="true" checked> One-sided
            </label>
            <label>
                <input type="radio" name="one-sided" value="false"> Two-sided
            </label>
        </fieldset>

        <!-- Button to trigger calculation -->
        <button type="button" onclick="fetchFormAndCalculate()">Calculate Sample Size</button>
    </form>

    <table>
        <tr>
            <td>Sample Size per Group:</td>
            <td id="sample-size-result-per-group"></td>
        </tr>
        <tr>
            <td>Total Sample Size:</td>
            <td id="sample-size-result-total"></td>
        </tr>
        <tr>
            <td>Estimated Duration (weeks):</td>
            <td id="sample-size-result-weeks"></td>
        </tr>
    </table>

</body>
</html>